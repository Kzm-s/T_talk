
<div>
<%# ログインしているときは以下を表示する %>
    <% if user_signed_in? %>
    <div> 
        <%= current_user.name + "さん、ようこそ" %>
    </div>
    <% end %>
</div><br>

<div>
  <button><%= link_to "新規投稿", new_post_path %></button>
</div><br>

<h3>タグ検索</h3>
  <div>
    <%= form_tag({controller:"posts",action:"index"}, method: :get) do %>
        <% Tag.all.each do |t| %>
            <li><%= check_box :tag_ids, t.name %><%= t.name %></li>
        <% end %>
        <%= submit_tag '検索' %>
    <% end %><br>
    <button><%= link_to "検索リセット", root_path %></button>
  </div><br>


<h3>投稿一覧</h3>
<div class="container">
  <div class="row">
    
    <% @posts.each do |post| %>
        <div class="col-md-4 rounded-circle">
          <div class="card mb-4 shadow-sm">

            <% if post.image? %>  <!-- アップロード画像がある場合に実行する -->

            <img class="card-img-top">
            <strong>画像</strong><br>
              <%= image_tag post.image.url %>
          <% end %>

            <img class="card-img-top">
              <div class="card-body">
                <!-- <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p> -->
                <p class="card-text"> <%= post.title %></p>
                <p class="card-text"> <%= post.content %></p>
                <ul>
                  <% post.tags.each do |tag| %>
                    <li><%= tag.name %></li>
                  <% end %>
                </ul>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
              <!-- <button type="button" class="btn btn-sm btn-outline-secondary">View</button> -->
                  <button type="button" class="btn btn-sm btn-outline-secondary"><%= link_to "詳細", post_path(post.id) %></button>
              <!-- <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button> -->
                  <button type="button" class="btn btn-sm btn-outline-secondary"><%= link_to "編集", edit_post_path(post.id) %></button>
                </div>
            <!-- <small class="text-muted">9 mins</small> -->
                <small class="text-muted">9分</small>
              </div>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>